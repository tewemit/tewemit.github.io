<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
    <style>
        .box {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .left-select {
            width: 40%;

        }

        .right-select {
            width: 40%;
            margin-top: 30px;
        }

        .middle {
            width: 20%;
            vertical-align: middle;
            margin-top: 40px;
            text-align: center;
        }

    </style>
</head>
<body>
<div class="box">
    <div class="left-select">
        <input type="text" placeholder="plant" name="plantNameTxt">
        <button id="delayColorBtn">Delay color</button>
        <input type="text" placeholder="color" name="plantColorTxt">
        <button id="filterBtn">Filter</button>
        <button id="terminateBtn">Clear Timers</button>
        <select name="" id="leftSelect" multiple="" style="width:100%;">
            <!--<option class="srcOption">plant-daffodil color-yellow</option>
            <option class="srcOption">plant-zinnia color-purple</option>
            <option class="srcOption">plant-chrysanthumum color-pink</option>
            <option class="srcOption">plant-lily color-pink</option>
            <option class="srcOption">plant-daffodil color-green</option>-->
        </select>
    </div>
    <div class="middle">
        <button id="toLeft"> <- To left</button>
        <button id="toRight">To right -></button>
    </div>
    <div class="right-select">
        <select name="" id="rightSelect" multiple="" style="width:100%;">


        </select>
    </div>
</div>

</body>
<script>
    /*

     */
    let plantColors = [{name: 'plant1', color: 'red'}, {name: 'plant2', color: 'red'}, {
        name: 'plant3',
        color: 'blue'
    }, {name: 'plant4', color: 'aqua'}]
    let delayTimeOutId
    let delayIntervalId
    $(function () {
        // populate left select
        populateSelect($("#leftSelect"), plantColors)

        $("#delayColorBtn").click(function () {
            delayTimeOutId = setTimeout(() => {
                $("#leftSelect > option:first").css('color', 'blue')
            }, 2000)

            delayIntervalId = setInterval(() => {
                let seconds = new Date().getSeconds()
                console.log($("#leftSelect > option:first").css('color'))
                console.log($("#leftSelect > option:first").css('color') === 'rgb(128, 0, 0)')
               // $("#leftSelect > option:first").css('color', seconds%2 ==0 ? 'green': 'maroon')
                // option two
                $("#leftSelect > option:first").css('color', $("#leftSelect > option:first").css('color') === 'rgb(128, 0, 0)' ? 'green' : 'maroon')
            }, 3000)
        })
        $("#terminateBtn").click(function () {
            clearInterval(delayIntervalId)
            clearTimeout(delayTimeOutId)
            $("#leftSelect > option:first").css('color', 'black')
        })

        $("#filterBtn").click(function () {
            console.log($("#leftSelect").val(),)
            if (!!!$('input[name=plantNameTxt]').val() && !!!$('input[name=plantColorTxt]').val()) {
                populateSelect($("#leftSelect"), plantColors)
                return
            }
            let filteredPlants = plantColors.filter(plant =>
                (plant.name === $('input[name=plantNameTxt]').val()) ||
                (plant.color === $('input[name=plantColorTxt]').val())
            )
            console.log(filteredPlants)
            populateSelect($("#leftSelect"), filteredPlants)


        })
        $("#toRight").click(function () {
            console.log($("#leftSelect").find($('option:selected')))
            $("#rightSelect").append( $("#leftSelect").find($('option:selected'))
            .sort())
            // sort the options by name
            //$("#rightSelect").
        })
        $("#toLeft").click(function () {
            console.log($("#rightSelect").find($('option:selected')))
            $("#leftSelect").append( $("#rightSelect").find($('option:selected'))
                .sort())
            // sort the options by name
            //$("#rightSelect").
        })

        //
        function populateSelect(selectId, plantList) {
            // populate left select
            $(selectId).html("")
            plantList.forEach(plant => {
                $(selectId).append('<option value="' + plant.name + '">' + plant.name + ' : ' + plant.color + '</option>')
            })
        }
    })

</script>
</html>